{
  "summary": {
    "test_run_timestamp": "2025-10-19T16:55:50.743251",
    "collection_name": "test_comprehensive_v4",
    "total_questions": 18,
    "successful_tests": 1,
    "failed_tests": 0,
    "total_test_duration_seconds": 2.6117360591888428,
    "service_configuration": {
      "embeddings": {
        "model": "jina-embeddings-v3",
        "dimension": 1024,
        "provider": "jina_api",
        "device": "jina_cloud_gpu",
        "cache_enabled": true,
        "cache_entries": 0
      },
      "answer_generation": {
        "cache_enabled": false
      },
      "reranking": {
        "model": "jina-reranker-v2-base-multilingual",
        "provider": "jina-api"
      }
    },
    "average_metrics": {
      "total_time_ms": 2611.489957998856,
      "server_time_ms": 2608.335256576538,
      "keyword_coverage_percentage": 0.0
    },
    "category_statistics": {
      "Advanced Logic": {
        "test_count": 1,
        "avg_time_ms": 2611.489957998856,
        "avg_keyword_coverage": 0.0
      }
    }
  },
  "test_results": [
    {
      "test_id": "7.6",
      "category": "Advanced Logic",
      "question": "Provide the payment terms explanation in both French and English for any invoice involving international shipment.",
      "difficulty": "hard",
      "test_capability": "conditional multi-language",
      "timestamp": "2025-10-19T16:55:50.743167",
      "success": true,
      "answer": "## English\n- Payment terms for international shipment invoices are not explicitly mentioned in the provided context.\n- The context does include payment terms for various invoices, such as Net 30 for MED-INV-2024-1523 and BUILD-2024-3309.\n\n## French\n- Les conditions de paiement pour les factures d'expédition internationale ne sont pas explicitement mentionnées dans le contexte fourni.\n- Le contexte inclut des conditions de paiement pour diverses factures, telles que Net 30 pour MED-INV-2024-1523 et BUILD-2024-3309.",
      "citations_count": 0,
      "citations": [],
      "performance": {
        "total_time_ms": 2611.489957998856,
        "server_time_ms": 2608.335256576538,
        "network_latency_ms": 3.154701422317885,
        "stage_times": {
          "intent_detection_ms": 1449.923038482666,
          "search_ms": 1170.0050830841064,
          "reranking_ms": 279.710054397583,
          "compression_ms": 0.0,
          "answer_generation_ms": 1158.3540439605713
        },
        "stage_percentages": {
          "intent_detection_pct": 55.588062724179956,
          "search_pct": 44.856391835907935,
          "reranking_pct": 10.723700248744281,
          "compression_pct": 0.0,
          "answer_generation_pct": 44.409706959254954
        },
        "bottleneck": {
          "stage": "intent_detection",
          "time_ms": 1449.923038482666,
          "percentage_of_total": 55.588062724179956
        }
      },
      "retrieval_metrics": {
        "search_results_count": 10,
        "reranked_count": 3,
        "compressed_count": 3,
        "context_count": 3
      },
      "models_used": {
        "llm_requested": null,
        "llm_used": "Meta-Llama-3.3-70B-Instruct",
        "llm_temperature": 0.3,
        "used_recommended_model": true,
        "used_custom_prompt": true
      },
      "intent_analysis": {
        "detected_intent": "negative_logic",
        "language": "en",
        "complexity": "moderate",
        "confidence": 0.92,
        "recommended_model": "Meta-Llama-3.3-70B-Instruct",
        "has_custom_prompt": true
      },
      "keyword_analysis": {
        "expected_keywords": [
          "no payment terms",
          "not specified",
          "no international shipment"
        ],
        "keywords_found": [],
        "keywords_missing": [
          "no payment terms",
          "not specified",
          "no international shipment"
        ],
        "coverage_percentage": 0.0
      },
      "full_response": {
        "success": true,
        "query": "Provide the payment terms explanation in both French and English for any invoice involving international shipment.",
        "collection_name": "test_comprehensive_v4",
        "tenant_id": "test_tenant",
        "answer": "## English\n- Payment terms for international shipment invoices are not explicitly mentioned in the provided context.\n- The context does include payment terms for various invoices, such as Net 30 for MED-INV-2024-1523 and BUILD-2024-3309.\n\n## French\n- Les conditions de paiement pour les factures d'expédition internationale ne sont pas explicitement mentionnées dans le contexte fourni.\n- Le contexte inclut des conditions de paiement pour diverses factures, telles que Net 30 pour MED-INV-2024-1523 et BUILD-2024-3309.",
        "citations": [],
        "context_chunks": [
          {
            "chunk_id": "ComprehensiveTestDocument_chunk_0008",
            "text": "## Medical Equipment Invoice\n\n**Invoice Number:** MED-INV-2024-1523\n**Transaction Date:** 2024-02-28\n**Vendor Name:** MedTech Equipment Supply\n**Vendor ID:** MEDTECH-SUPPLY-099\n\n**Items:**\n1. Philips IntelliVue MX40 Patient Monitor - Model: MX40 - SKU: PHIL-MX40-2024 - Price: 4500.00 USD - Year: 2024\n2. Welch Allyn Blood Pressure Cuff Set - SKU: WA-BP-CUFF-SET - Price: 189.99 USD\n3. Nonin Pulse Oximeter - Model: Onyx Vantage 9590 - SKU: NONIN-9590 - Price: 375.00 USD - Color: Black\n\n**Amount:** 5064.99\n**Tax Amount:** 405.20\n**Total:** 5470.19\n**Currency:** USD\n**Payment Method:** Purchase Order\n**Payment Status:** Net 30 - Due 2024-03-30\n\n**Technical Specifications:** Philips MX40 features ECG, SpO2, NBP monitoring, 8.4\" touchscreen display, 5-hour battery life, wireless connectivity, clinical measurements include heart rate, respiration rate, temperature",
            "document_id": "ComprehensiveTestDocument",
            "topics": "Medical Equipment, Invoice, Healthcare Technology",
            "keywords": "Philips IntelliVue MX40 Patient Monitor, Welch Allyn Blood Pressure Cuff Set, Nonin Pulse Oximeter, MedTech Equipment Supply, MED-INV-2024-1523, transaction: 2024-02-28, due: 2024-03-30, payment-terms: Net 30, payment-method: Purchase Order, ECG, SpO2, NBP monitoring",
            "summary": "This invoice from MedTech Equipment Supply details the purchase of medical equipment including a Philips IntelliVue MX40 Patient Monitor, Welch Allyn Blood Pressure Cuff Set, and Nonin Pulse Oximeter. The transaction occurred on 2024-02-28, with payment terms of Net 30, due by 2024-03-30.",
            "questions": "What medical equipment was purchased?|When is the payment due?|What are the technical specifications of the Philips MX40?"
          },
          {
            "chunk_id": "ComprehensiveTestDocument_chunk_0012",
            "text": "## Restaurant Supply Order\n\n**Invoice Number:** REST-2024-0445\n**Transaction Date:** 2024-01-20\n**Vendor Name:** ChefPro Restaurant Supply Co.\n**Vendor ID:** CHEFPRO-VENDOR-2024\n\n**Equipment Ordered:**\n1. Hobart Commercial Dishwasher - Model: LXeR-2 - SKU: HOBART-LXER2 - Price: 8999.00 USD - Year: 2024 - Dimensions: 24.5 x 25 x 34 inches\n2. Vulcan Gas Range - Model: 60SS-10B - SKU: VULCAN-60SS-10B - Price: 5499.00 USD - Color: Stainless Steel - Size: 60 inches wide\n3. True Refrigerator - Model: T-49-HC - SKU: TRUE-T49-HC - Price: 3299.00 USD - Dimensions: 54 x 31 x 83 inches\n\n**Amount:** 17797.00\n**Tax Amount:** 1423.76\n**Total:** 19220.76\n**Currency:** USD\n**Payment Method:** Commercial Loan Financing\n**Payment Status:** Financed - 36 monthly payments",
            "document_id": "ComprehensiveTestDocument",
            "topics": "Restaurant Equipment, Commercial Financing, Vendor Transactions",
            "keywords": "Hobart Commercial Dishwasher, Vulcan Gas Range, True Refrigerator, ChefPro Restaurant Supply Co., HOBART-LXER2, VULCAN-60SS-10B, TRUE-T49-HC, transaction: 2024-01-20, payment-method: Commercial Loan Financing, payment-status: Financed - 36 monthly payments",
            "summary": "An invoice for restaurant equipment from ChefPro Restaurant Supply Co. includes a Hobart Commercial Dishwasher, Vulcan Gas Range, and True Refrigerator, totaling $19,220.76, with payment structured as a 36-month commercial loan.",
            "questions": "What restaurant equipment was ordered?|Who is the vendor for the restaurant supply order?|How is the payment structured for this order?"
          },
          {
            "chunk_id": "ComprehensiveTestDocument_chunk_0016",
            "text": "## Construction Materials Invoice\n\n**Invoice Number:** BUILD-2024-3309\n**Transaction Date:** 2024-03-10\n**Vendor Name:** BuildRight Materials & Supply\n**Vendor ID:** BUILDRIGHT-VENDOR-88\n\n**Materials Ordered:**\n1. Lumber - 2x4x8 Premium Grade Douglas Fir - SKU: LUMBER-2X4X8-DF - Price: 8.99 per piece - Quantity: 200 - Amount: 1798.00 USD\n2. Concrete Mix - Quikrete 80lb bags - SKU: CONCRETE-80LB-QK - Price: 6.49 per bag - Quantity: 100 - Amount: 649.00 USD - Weight: 80 pounds per bag\n3. Nails - 16d Common Galvanized - SKU: NAILS-16D-GAL-50LB - Price: 89.99 - Size: 50 pound box\n4. Paint - Sherwin-Williams ProClassic - Color: Warm White - SKU: SW-PROCLASSIC-WW-GAL - Price: 54.99 per gallon - Quantity: 20 - Amount: 1099.80 USD\n\n**Amount:** 3636.79\n**Tax Amount:** 290.94\n**Total:** 3927.73\n**Currency:** USD\n**Payment Method:** Net 30 Terms\n**Payment Status:** Pending - Due 2024-04-09",
            "document_id": "ComprehensiveTestDocument",
            "topics": "Construction Materials, Vendor Invoice, Payment Terms",
            "keywords": "Lumber - 2x4x8 Premium Grade Douglas Fir, Concrete Mix - Quikrete 80lb bags, Nails - 16d Common Galvanized, Paint - Sherwin-Williams ProClassic, BuildRight Materials & Supply, LUMBER-2X4X8-DF, CONCRETE-80LB-QK, NAILS-16D-GAL-50LB, SW-PROCLASSIC-WW-GAL, transaction: 2024-03-10, due: 2024-04-09, payment-terms: Net 30, payment-status: Pending, invoice: BUILD-2024-3309, USD",
            "summary": "An invoice from BuildRight Materials & Supply dated March 10, 2024, lists construction materials including lumber, concrete mix, nails, and paint. The total amount due is $3927.73 USD, with a payment status of pending and a due date of April 9, 2024, under Net 30 terms.",
            "questions": "What materials were ordered?|Who is the vendor?|When is the payment due?"
          }
        ],
        "stages": {
          "search": {
            "time_ms": 1170.0050830841064,
            "success": true,
            "error": null,
            "metadata": {
              "results_count": 10,
              "top_k": 10,
              "metadata_boost_enabled": true
            }
          },
          "reranking": {
            "time_ms": 279.710054397583,
            "success": true,
            "error": null,
            "metadata": {
              "input_count": 10,
              "output_count": 3,
              "top_k": 3
            }
          },
          "compression": {
            "time_ms": 0.0,
            "success": true,
            "error": null,
            "metadata": {
              "skipped": true
            }
          },
          "intent_detection": {
            "time_ms": 1449.923038482666,
            "success": true,
            "error": null,
            "metadata": {
              "intent": "negative_logic",
              "language": "en",
              "complexity": "moderate",
              "confidence": 0.92,
              "recommended_model": "Meta-Llama-3.3-70B-Instruct",
              "recommended_max_tokens": 1024,
              "has_custom_prompt": true
            }
          },
          "answer_generation": {
            "time_ms": 1158.3540439605713,
            "success": true,
            "error": null,
            "metadata": {
              "context_chunks": 3,
              "citations": 0,
              "model_used": "Meta-Llama-3.3-70B-Instruct",
              "model_requested": null,
              "max_tokens_used": 1024,
              "temperature": 0.3,
              "used_custom_prompt": true,
              "used_recommended_model": true,
              "used_recommended_max_tokens": true
            }
          }
        },
        "total_time_ms": 2608.335256576538,
        "search_results_count": 10,
        "reranked_count": 3,
        "compressed_count": 3,
        "context_count": 3,
        "api_version": "1.0.0",
        "timestamp": "2025-10-19T16:55:50.742146"
      }
    }
  ]
}