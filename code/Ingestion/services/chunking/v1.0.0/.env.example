# Chunking Orchestrator v4.0.0 Configuration

# Server
HOST=0.0.0.0
PORT=8011

# ============================================================================
# Inter-Service Communication Mode
# ============================================================================
# INTERNAL_MODE=true  : Direct service calls (localhost) - RECOMMENDED for production
#                      Lower latency (30-90ms faster), no APISIX overhead for internal calls
#                      External clients still authenticate via APISIX
#
# INTERNAL_MODE=false : Route through APISIX - For testing/debugging only
#                      Adds 5-15ms per service call, full APISIX logging
#                      Requires SERVICE_API_KEY to be set
INTERNAL_MODE=true

# APISIX Configuration (required for permission checks and admin API)
APISIX_GATEWAY_URL=http://localhost:9080
APISIX_ADMIN_URL=http://localhost:9081
APISIX_ADMIN_KEY=sk-apisix-admin-mindmate247-2025-v2

# Service API Key (only used if INTERNAL_MODE=false)
SERVICE_API_KEY=sk-internal-service-key

# Service URLs (automatically configured based on INTERNAL_MODE)
# If INTERNAL_MODE=true  : Uses http://localhost:8001/v2/embeddings (direct)
# If INTERNAL_MODE=false : Uses http://localhost:9080/api/v2/embeddings/embeddings (via APISIX)
# You can override by setting these environment variables
EMBEDDINGS_SERVICE_URL=
METADATA_SERVICE_URL=

# Milvus Configuration
MILVUS_HOST=localhost
MILVUS_PORT=19530

# Processing Configuration
MAX_WORKERS=5
SERVICE_TIMEOUT=60

# ============================================================================
# Performance Optimization (v4.0.0+)
# ============================================================================

# Connection Pooling (reduces TCP handshake overhead for service calls)
CONNECTION_POOL_SIZE=20     # Keepalive connections
CONNECTION_POOL_MAX=100     # Maximum concurrent connections
CONNECTION_TIMEOUT=60       # Request timeout in seconds
